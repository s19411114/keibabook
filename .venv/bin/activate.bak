# Minimal activate script - improved
if [ -n "${BASH_SOURCE[0]:-}" ]; then
    SCRIPT_PATH="${BASH_SOURCE[0]}"
else
    SCRIPT_PATH="$0"
fi
if command -v readlink >/dev/null 2>&1; then
    DIR="$(dirname "$(readlink -f "$SCRIPT_PATH")")"
else
    DIR="$(cd "$(dirname "$SCRIPT_PATH")" && pwd)"
fi
VIRTUAL_ENV="$(cd "$DIR/.." && pwd)"
export VIRTUAL_ENV
_OLD_VIRTUAL_PATH="$PATH"
PATH="$VIRTUAL_ENV/bin:$PATH"
export PATH
if [ -n "$PS1" ]; then
    _OLD_VIRTUAL_PS1="$PS1"
    PS1="(venv) ${PS1}"
fi
# deactivate
deactivate () {
    if [ -n "$_OLD_VIRTUAL_PATH" ]; then
        PATH="$_OLD_VIRTUAL_PATH"
        export PATH
        unset _OLD_VIRTUAL_PATH
    fi
    if [ -n "$_OLD_VIRTUAL_PS1" ]; then
        PS1="$_OLD_VIRTUAL_PS1"
        unset _OLD_VIRTUAL_PS1
    fi
    unset VIRTUAL_ENV
    unset -f deactivate
}
